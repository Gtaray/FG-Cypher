<?xml version="1.0" encoding="iso-8859-1"?>

<!-- 
  Please see the license.html file included with this distribution for 
  attribution and copyright information.
-->

<root>
	<windowclass name="type" copy="record_window">
		<minimize>minimized_reference</minimize>
		<script>
			function update()
			end
		</script>
		<sheetdata>
			<sub_record_header name="header">
				<class>type_header</class>
			</sub_record_header>

			<frame_record_content_tabbed name="contentframe" />
			<ft_record name="text">
				<anchored to="contentframe" position="over" />
			</ft_record>
			<subwindow_record name="stats">
				<class>type_stats</class>
			</subwindow_record>

			<scrollbar_record>
				<target>text</target>
			</scrollbar_record>
			<scrollbar_record>
				<target>stats</target>
			</scrollbar_record>

			<tabs_recordsheet name="tabs">
				<tab>
					<icon>tab_main</icon>
					<subwindow>text</subwindow>
				</tab>
				<tab>
					<icon>tab_other</icon>
					<subwindow>stats</subwindow>
				</tab>
			</tabs_recordsheet>

			<resize_referencepage />
			<close_referencepage />
		</sheetdata>
	</windowclass>

	<windowclass name="type_header">
		<margins control="0,0,0,7" />
		<script file="common/scripts/record_header_simple.lua" />
		<sheetdata>
			<link_record_header>
				<class>type</class>
			</link_record_header>

			<anchor_record_header_right />
			<icon_record_locked />
			<button_record_locked />

			<string_record_name name="name" />
			<label_recordtype name="recordtype_label">
				<static textres="library_recordtype_ref_type" />
			</label_recordtype>
		</sheetdata>
	</windowclass>

	<windowclass name="type_stats">
		<margins control="0,0,0,2" />
		<script file="campaign/scripts/type_stats.lua" />
		<sheetdata>
			<anchor_column name="columnanchor" />

			<header_column name="starting_features_header">
				<static textres="type_header_starting_features"/>
				<center />
			</header_column>

			<label_column name="stats_label">
				<anchored>
					<top offset="20" />
				</anchored>
				<static textres="type_label_starting_stats" />
			</label_column>

			<number_column name="mightpool">
				<anchored>
					<top offset="20" />
				</anchored>
				<min>0</min>
				<default>10</default>
			</number_column>
			<label_fieldtop name="label_mightpool">
				<anchored to="mightpool" />
				<static textres="type_label_might" />
			</label_fieldtop>

			<number_column_extended name="speedpool">
				<anchored to="mightpool" />
				<min>0</min>
				<default>10</default>
			</number_column_extended>
			<label_fieldtop name="label_speedpool">
				<anchored to="speedpool" />
				<static textres="type_label_speed" />
			</label_fieldtop>

			<number_column_extended name="intellectpool">
				<anchored to="mightpool" />	
				<min>0</min>
				<default>10</default>
			</number_column_extended>
			<label_fieldtop name="label_intellectpool">
				<anchored to="intellectpool" />
				<static textres="type_label_intellect" />
			</label_fieldtop>

			<label_column name="floatingstats_label">
				<static textres="type_label_floating_stats" />
			</label_column>
			<number_column name="floatingstats">
				<min>0</min>
				<default>6</default>
				<tooltip textres="type_tooltip_floatingstats" />
			</number_column>

			<label_column name="edge_label">
				<anchored>
					<top offset="20" />
				</anchored>
				<static textres="type_label_starting_edge" />
			</label_column>

			<number_column name="mightedge">
				<anchored>
					<top offset="20" />
				</anchored>
				<min>0</min>
			</number_column>
			<label_fieldtop name="label_mightedge">
				<anchored to="mightedge" />
				<static textres="type_label_might" />
			</label_fieldtop>

			<number_column_extended name="speededge">
				<anchored to="mightedge" />
				<min>0</min>
			</number_column_extended>
			<label_fieldtop name="label_speededge">
				<anchored to="speededge" />
				<static textres="type_label_speed" />
			</label_fieldtop>

			<number_column_extended name="intellectedge">
				<anchored to="mightedge" />	
				<min>0</min>
			</number_column_extended>
			<label_fieldtop name="label_intellectedge">
				<anchored to="intellectedge" />
				<static textres="type_label_intellect" />
			</label_fieldtop>

			<label_column name="effort_label">
				<static textres="type_label_starting_effort" />
			</label_column>
			<number_column name="effort">
				<min>0</min>
				<default>1</default>
			</number_column>

			<label_column name="cypheruse_label">
				<static textres="type_label_cypher_use" />
			</label_column>
			<number_column name="cypheruse">
				<min>0</min>
				<default>2</default>
			</number_column>

			<header_column name="abilities_header">
				<static textres="type_header_abilities"/>
				<center />
			</header_column>
			<list_column name="abilities">
				<script>
					function onSortCompare(w1, w2)
						if w1.tier.getValue() ~= w2.tier.getValue() then
							return w1.tier.getValue() &gt; w2.tier.getValue()
						end
						if w1.given.getValue() ~= w2.given.getValue() then
							return w1.given.getValue() &lt; w2.given.getValue()
						end
						return w1.name.getValue() &gt; w2.name.getValue()
					end
					function addEntry(sClass, sRecord)
						local w = createWindow();
						if w then
							w.link.setValue(sClass, sRecord);
						end
						return w;
					end
				</script>
				<datasource>.abilities</datasource>
				<class>type_ability_item</class>
			</list_column>
		</sheetdata>
	</windowclass>

	<windowclass name="type_ability_item">
		<margins control="0,0,0,2" />
		<script file="campaign/scripts/type_ability_item.lua" />
		<sheetdata>
			<genericcontrol name="leftanchor">
				<anchored width="0" height="0">
					<top />
					<left />
				</anchored>
				<invisible />
			</genericcontrol>
			<button_checkbox name="given">
				<anchored to="leftanchor" width="12" height="12">
					<top offset="4" />
					<left relation="relative" />
				</anchored>
				<tooltip textres="type_tooltip_ability_given" />
				<script>
					function onValueChanged()
						window.windowlist.applySort()
					end
				</script>
			</button_checkbox>
			<basicnumber name="tier">
				<anchored to="leftanchor" height="18" width="20">
					<left relation="relative" offset="5" />
					<top offset="1" />
				</anchored>
				<min>1</min>
				<max>6</max>
				<default>1</default>
				<tooltip textres="type_tooltip_ability_tier" />
				<script>
					function onValueChanged()
						window.windowlist.applySort()
					end
				</script>
			</basicnumber>

			<genericcontrol name="rightanchor">
				<anchored width="0" height="0">
					<top />
					<right />
				</anchored>
				<invisible />
			</genericcontrol>
			<button_idelete name="idelete">
				<anchored width="20" height="20">
					<top offset="2" />
					<right parent="rightanchor" anchor="left" relation="relative" offset="0" />
				</anchored>
			</button_idelete>
			<linkfield name="link">
				<anchored width="20" height="20">
					<top offset="2" />
					<right parent="rightanchor" anchor="left" relation="relative" offset="-2" />
				</anchored>
				<class>ability</class>
				<readonly />
			</linkfield>

			<string_textlistitem name="name">
				<anchored height="20">
					<top offset="2" />
					<left parent="leftanchor" anchor="right" relation="relative" offset="7" />
					<right parent="rightanchor" anchor="left" relation="current" offset="-5" />
				</anchored>
				<empty textres="library_recordtype_empty_ability"></empty>
				<script>
					function onValueChanged()
						window.windowlist.applySort()
					end
				</script>
				<readonly />
			</string_textlistitem>
		</sheetdata>
	</windowclass>

	<template name="number_column_extended">
		<basicnumber name="speed">
			<anchored width="40" height="20">
				<top anchor="top" />
				<left anchor="right" relation="relative" offset="10" />
			</anchored>
		</basicnumber>
	</template>
</root>